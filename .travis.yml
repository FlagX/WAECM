sudo: required
services: docker
install: docker build -t waecm-bsp1 .
script:
- docker run -p 8080:8080 --name group6 waecm-bsp1 test
after_success:
- pip install --user awscli
- export PATH=$PATH:$HOME/.local/bin
- eval $(aws ecr get-login --region us-west-2)
- docker tag waecm-bsp1:latest 313230979214.dkr.ecr.us-west-2.amazonaws.com/waecm-bsp1:latest
- docker push 313230979214.dkr.ecr.us-west-2.amazonaws.com/waecm-bsp1:latest
env:
  global:
  - secure: ScctyXDhmZ4Rm5HcBoSEcEZFDiOzoHV/+wqkRCA8FT1wuAOYBedOoB++bADDICBd2k4KTQFheXg6HjMJ5Fc4bwy8TnA809BG7+s/jOaDrt6Gq6JD7ja0Dx8WRfJ7TlKEAG5D/d1Dn7YD1nJG+/mSzvVoAuQhKOrrPHxQOeN0c3KX8izlZCKMqBRKCzybCuaXsz6TrmZExZhyAnulZzdtvVy/IpWvROrC077AhMmLQeLTtJOSff8ESyt7Y/ydVEQm0ezj09gp63B+E8RkJfAKrikYnEGxb5/VMF7u03dxgI5ivcwYbPFNQYnzjYGKWvXeoR1lc8cvmDtlEW5CrkeJ5yNxttzbGvbFmh/gXhYNlicoQYn1bmjogLFjsjgMJM7pOMkeDdQJ2LiTbCe2koVreJAiARxrvhUdnwrcLxzUbgViSpZi9s9oYrTQaizK+gZwqAMZKD8o/9dhM+/a36lf2uYe31Yue3Lx/y6Bo74iX8w5Fxe+PTUhncY3LgEejh71FuEWR4i++wEr1i4kwJAu3bPkL6U7iyEeJUVfTxnLUNEnvGvVJvBrADTGrMs/vHjwHEO0DhbZW/zqWvXFv/37HZGuVf+lMF/36SVkuk1q5Mx96ltZorfw1c+n9ttBPLnawNYWW26VO0NZJnqT3o+opuzl/QPKDQ6D9JvcwDCosyE=
  - secure: d/XeyCkPGp+sRisn6LRK2gRF55+7J/ToJ4FOuL9oCRibutIJR8MPPECX3fj1wfOtS0IXLb+q8chSDeBskYq4vw4Z5m7HpOI0sE9ID5DkndcAhIuBYnesG6WaEKfhMP+p55n+dbEWQJ13BCoZjp4SysUsk4XVyzPrjOKGCP9YSeE9mbOtHLhoy50V80/VJeGOT200BeEkGlpBSATFrJcoKrASx2Zr0bWG1YtnKZWMbTeCtl9pITmPNbMp5etPbf6vJSJr7gpQygoSDCUtkc5sI3kPEGUaumm5nP0uob0A2e0zS5wwD3t03MMvNQrVOdftITZ5cfNxkjh+GdPMLZ6cpw8KGtyUsDJzckszi5OhgUDXgi7kOFi6KvTnetXSk7Kp4EcEm92m36wC21r/nLepQNDfMNBtD1bhk9ZzKmOttSx3bhNsfP2DwDqRMOB/mEPUvke/fmsf4pljgjxhjQONLwqI6i91ZF+M49aRHM+wvz4b7kaCBFQZhIKZi57dbX10XMPuhYnqfKJPSs2hTBHHLwhZuh9PdFxcBr2PjYmHEGBHCgRFTfjGqKBJ6jCmpCA4rcoDSY7575laDsHJtd5eSIUbgUFjg2rvjvKaSzQm1tn1Td6kcAyTDjQ4gaHgzzOCz7PISTyZ4k7Ljl/fZ1KkLmj6PRXgQ9qPxNCwHGSffoo=
  - secure: ecvxDJ5EHdayBV5ZHoubV5mBMz6LA58ADVDLCv3K4yWwEwKA7sca3IGklvOkbcdNY9FJ0g8FNL10Pgz974rfakl1VhnMDThedssCfQtzit3YjM6CWAxU/jQxEGQH42Hsc3MxY4AUNfC6PbtauTQ3STmqfQ1o/VuEu1IFxKjh8ZR7wadng4QqEd9xGIYnBqqOLBWn3srnl96lSNLZhEDsE66nF5hKPB38Kb1at87Iy6y0gJbdoB2G22XYpTy2CLklTbQstYLy5+YRGXIIEi3Iyd4pcDUPwRZWx6uxauXYc7jHnCXQcOHwB+ixoWGm0xdmAVtpQ754h+H8juctBZvctn0KaDQESnwb8KsCy5PAFwuBtPfuTXssNVos8s/9PSxop/YsV7m5c7nUJy14WXh3umYzvPjH2gbAUGDbcV33YYXFS428UQaEKXokZdbTjxJ+twofJllrL++2U1frgfBrnGUKFjmXt4FDYminFZz1+YoN9i2VyfsMUubP7zOrkSAQ/+2FAP54KWgrJmBG/+vNjlC6QU5/8X7cN0nBynX+5C5N6biv0VXp8PteMAnjdgPcAMfqKmD/kMuKaevhlRe+naqMXxAShjxoCermE00tBi4OhIomB7JZJ/AbTaC9pk7tI2/On+aV1Ag+hNQ2dpgwghAN57PzUpGVIZUe7uvpNzo=
  - secure: Boni51Rwi1z5FXQxv3bLrDNkh1vdYzXGAt5/N8qkJC8dezb3cqc/EZjU3NhXBVV3bIkw6vRcliKszNYeWAOB3E76M3u6Fo2etIZnSJkpgr3ARz/ovOR3rtToKCt+EtTlKlpkaqjaFJTSHweWLJrsrzoFwZbj4RTBpY4HosJRy7rbupSlxyp/WbMDxsaCdDjHro2u9mYhhvjlLj6XB/FoG584JvrcJuAGf1wzUqH/L88iexPKFeOseGKduRguSn/0/R3JBolecG12EYDUkbeKwTPoxLYWi/vLn/rpkwN8txIvgpU88lVXD/XgODNJravZnLOIEGWK+rxIoO5/DbjaC8KCh7eZr6rkdkEr3dhREl7z0j/GiRuDNfEBGrv5uRAULi0chpL+XAbTgkuzoCyb5vhbtVg+sGTrsL238lBByy3l9+2v2o4pGsp3t6GAw8iF1Bssl7l17R4WUsBKM96vc6GIRKZanmPqhQtg9joynoGA1jvIPfwcSGJXTYsQhnZm9WMoK274nNfICgYBo4G2uaWI9pMYirX587NnBeQjblW476Nx8UW90DqxcGvJpdpsPkRICZ66hNYhzXPJ4W9a4K4cKQVmo150vJRR12XOJ+EhYlKiR0pV0MgDghr4jNB/mUIUSs3OLOD8hpfRoTkgeRFE3ay6mMKscIEv7UJVYdM=
deploy:
  provider: script
  skip_cleanup: true
  script: chmod 600 EC2_2.pem && ssh -o StrictHostKeyChecking=no -i EC2_2.pem ec2-user@ec2-54-187-122-131.us-west-2.compute.amazonaws.com
    ./deploy.sh
  on:
    branch: development
before_install:
- openssl aes-256-cbc -K $encrypted_1db68a17bc07_key -iv $encrypted_1db68a17bc07_iv
  -in EC2_2.pem.enc -out ./EC2_2.pem -d
- openssl aes-256-cbc -K $encrypted_63a47c097ff5_key -iv $encrypted_63a47c097ff5_iv
  -in EC2_2.pem.enc -out ./EC2_2.pem -d
